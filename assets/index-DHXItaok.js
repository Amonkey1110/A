import{e as C,r as l,f as j,g as v,j as s}from"./index-Cqf5FK_u.js";const N=c=>C({url:"/maoyan/cities.json",method:"get",cancelToken:c}),g=()=>{const[c,m]=l.useState([]),[h,r]=l.useState({}),[p,d]=l.useState([]);return l.useEffect(()=>{N().then(a=>{m(a.hot);const t=a.cts.reduce((i,n)=>{const e=n.py.charAt(0).toUpperCase();return i[e]||(i[e]=[]),i[e].push(n),i},{});Object.keys(t).forEach(i=>{t[i].sort((n,e)=>n.py.localeCompare(e.py))}),r(t),d(Object.keys(t).sort())})},[]),{hotCities:c,groupedCities:h,sortedKeys:p}},k=()=>{const c=j(),{hotCities:m,groupedCities:h,sortedKeys:r}=g(),{setCity:p,actualLocationCity:d}=v(),a=e=>{p(e),c("/")},t=e=>{const o=document.querySelector(`.city-wrapper[data-index="${e}"]`);if(o){const x=getComputedStyle(document.documentElement).getPropertyValue("--header-height").trim(),u=parseInt(x)||50,y=o.getBoundingClientRect().top+window.pageYOffset-u;window.scrollTo({top:y,behavior:"smooth"})}},i=m.map(e=>s.jsx("div",{className:"city-item",onClick:()=>a(e),children:e},e)),n=()=>r.map(e=>s.jsxs("div",{className:"city-wrapper","data-index":e,children:[s.jsx("div",{className:"city-name",children:e}),s.jsx("div",{className:"city-box",children:h[e].map(o=>s.jsx("div",{className:"city-item",onClick:()=>a(o.nm),children:o.nm},o.id))})]},e));return s.jsxs("div",{className:"citylist-container",children:[s.jsxs("div",{className:"city-wrapper","data-index":"location",children:[s.jsx("div",{className:"city-name",children:"定位城市"}),s.jsx("div",{className:"city-box",children:s.jsx("div",{className:"city-item",onClick:()=>a(d),children:d})})]}),s.jsxs("div",{className:"city-wrapper","data-index":"hot",children:[s.jsx("div",{className:"city-name",children:"热门城市"}),s.jsx("div",{className:"city-box",children:i})]}),n(),s.jsxs("div",{className:"index-bars",children:[s.jsx("div",{className:"index-bar",onClick:()=>t("location"),children:"定"}),s.jsx("div",{className:"index-bar",onClick:()=>t("hot"),children:"热"}),r.map(e=>s.jsx("div",{className:"index-bar",onClick:()=>t(e),children:e},e))]})]})};export{k as default};
