import{r,h as d,i,j as s}from"./index-Bu1_Tt0Q.js";import{g as x}from"./premovie-CB0U7R2A.js";const j=()=>{const[o,t]=r.useState([]),{handleScroll:l,handleTouchStart:h,handleTouchMove:m}=d();r.useEffect(()=>{const e=i.CancelToken.source();return(async()=>{try{const n=await x({ci:1,limit:20,offset:0},e.token);t(n.coming||[])}catch(n){i.isCancel(n)||t([])}})(),()=>{e.cancel("组件卸载，取消请求")}},[]);const c=o.map((e,a)=>s.jsx("li",{children:s.jsxs("div",{className:"movie-item",children:[s.jsx("img",{src:e.img,alt:e.nm}),s.jsxs("span",{className:"score",children:[e.wish,"想看"]}),s.jsx("h3",{children:e.nm}),s.jsx("p",{className:"coming-title",children:e.comingTitle})]})},e.id||a));return s.jsxs("div",{className:"movie-container",children:[s.jsx("div",{className:"top-rate",children:s.jsx("h2",{children:"近期最受期待"})}),c.length>0&&s.jsx("ul",{className:"swiper-list",onScroll:l,onTouchStart:h,onTouchMove:m,children:c})]})};export{j as default};
