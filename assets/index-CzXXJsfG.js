import{r as n,i as l,j as s}from"./index-Bu1_Tt0Q.js";import{g as x}from"./premovie-CB0U7R2A.js";const N=()=>{const[o,r]=n.useState({}),[m,d]=n.useState([]);return n.useEffect(()=>{const a=l.CancelToken.source();return(async()=>{try{const h=(await x({ci:1,limit:20,offset:0},a.token)).coming||[],c={};h.forEach(i=>{c[i.comingTitle]||(c[i.comingTitle]=[]),c[i.comingTitle].push(i)}),r(c),d(Object.keys(c))}catch(t){l.isCancel(t)||console.error("获取待映电影失败:",t)}})(),()=>{a.cancel("组件卸载，取消请求")}},[]),s.jsx("div",{className:"cominglist-container",children:m.map(a=>s.jsxs("div",{className:"movie-group",children:[s.jsx("div",{className:"date-header",children:s.jsx("span",{className:"date-label",children:a})}),s.jsx("div",{className:"movie-list",children:o[a].map(e=>s.jsxs("div",{className:"coming-item",children:[s.jsx("div",{className:"movie-poster",children:s.jsx("img",{src:e.img,alt:e.nm})}),s.jsxs("div",{className:"movie-info",children:[s.jsx("h3",{className:"movie-name",children:e.nm}),s.jsx("div",{className:"movie-stats",children:s.jsxs("span",{className:"wish-count",children:[e.wish,"人想看"]})}),s.jsxs("div",{className:"movie-cast",children:[s.jsx("span",{className:"cast-label",children:"主演:"}),s.jsx("span",{className:"cast-names",children:e.nm})]}),s.jsx("div",{className:"movie-date",children:s.jsxs("span",{className:"date-text",children:[e.comingTitle,"上映"]})})]}),s.jsx("div",{className:"movie-action",children:s.jsx("button",{className:"action-btn",children:"预售"})})]},e.id))})]},a))})};export{N as default};
