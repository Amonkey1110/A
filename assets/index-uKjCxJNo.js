import{f as x,r as i,l as j,i as r,j as e,n as p}from"./index-Cqf5FK_u.js";const f=()=>{const o=x(),[l,t]=i.useState([]),{handleScroll:h,handleTouchStart:d,handleTouchMove:m}=j();i.useEffect(()=>{const s=r.CancelToken.source();return(async()=>{try{const n=await p({ci:1,limit:20,offset:0},s.token);t(n.coming||[])}catch(n){r.isCancel(n)||t([])}})(),()=>{s.cancel("组件卸载，取消请求")}},[]);const u=s=>{o(`/movie/${s}`)},a=l.map((s,c)=>e.jsx("li",{children:e.jsxs("div",{className:"movie-item",onClick:()=>u(s.id),"data-movieid":s.id,children:[e.jsx("img",{src:s.img,alt:s.nm}),e.jsxs("span",{className:"score",children:[s.wish,"想看"]}),e.jsx("h3",{children:s.nm}),e.jsx("p",{className:"coming-title",children:s.comingTitle})]})},s.id||c));return e.jsxs("div",{className:"movie-container",children:[e.jsx("div",{className:"top-rate",children:e.jsx("h2",{children:"近期最受期待"})}),a.length>0&&e.jsx("ul",{className:"swiper-list",onScroll:h,onTouchStart:d,onTouchMove:m,children:a})]})};export{f as default};
