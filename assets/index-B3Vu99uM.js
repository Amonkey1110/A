import{e as C,r as d,f as j,g as v,j as s}from"./index-B9Cf4un1.js";const N=o=>C({url:"/maoyan/cities.json",method:"get",cancelToken:o}),g=()=>{const[o,l]=d.useState([]),[m,r]=d.useState({}),[h,p]=d.useState([]);return d.useEffect(()=>{N().then(c=>{l(c.hot);const t=c.cts.reduce((i,a)=>{const e=a.py.charAt(0).toUpperCase();return i[e]||(i[e]=[]),i[e].push(a),i},{});Object.keys(t).forEach(i=>{t[i].sort((a,e)=>a.py.localeCompare(e.py))}),r(t),p(Object.keys(t).sort())})},[]),{hotCities:o,groupedCities:m,sortedKeys:h}},k=()=>{const o=j(),{hotCities:l,groupedCities:m,sortedKeys:r}=g(),{setCity:h,actualLocationCity:p}=v(),c=e=>{h(e),o("/")},t=e=>{const n=document.querySelector(`.city-wrapper[data-index="${e}"]`);if(n){const x=getComputedStyle(document.documentElement).getPropertyValue("--header-height").trim(),u=parseInt(x)||50,y=n.getBoundingClientRect().top+window.pageYOffset-u;window.scrollTo({top:y,behavior:"smooth"})}},i=l.map(e=>s.jsx("div",{className:"city-item",onClick:()=>c(e),children:e},e)),a=()=>r.map(e=>s.jsxs("div",{className:"city-wrapper","data-index":e,children:[s.jsx("div",{className:"city-name",children:e}),s.jsx("div",{className:"city-box",children:m[e].map(n=>s.jsx("div",{className:"city-item",onClick:()=>c(n.nm),children:n.nm},n.id))})]},e));return s.jsxs("div",{className:"citylist-container",children:[s.jsxs("div",{className:"city-wrapper","data-index":"location",children:[s.jsx("div",{className:"city-name",children:"定位城市"}),s.jsx("div",{className:"city-box",children:s.jsx("div",{className:"city-item",children:p})})]}),s.jsxs("div",{className:"city-wrapper","data-index":"hot",children:[s.jsx("div",{className:"city-name",children:"热门城市"}),s.jsx("div",{className:"city-box",children:i})]}),a(),s.jsxs("div",{className:"index-bars",children:[s.jsx("div",{className:"index-bar",onClick:()=>t("location"),children:"定"}),s.jsx("div",{className:"index-bar",onClick:()=>t("hot"),children:"热"}),r.map(e=>s.jsx("div",{className:"index-bar",onClick:()=>t(e),children:e},e))]})]})};export{k as default};
