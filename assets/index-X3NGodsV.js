import{h as v,r as c,i as o,j as s,I as d,k as x}from"./index-Cqf5FK_u.js";const u=()=>{const{movieId:l}=v(),[e,m]=c.useState(null),[h,r]=c.useState(!0),[t,n]=c.useState(null);return c.useEffect(()=>{const a=o.CancelToken.source();return(async()=>{if(!l){n("电影ID不存在"),r(!1);return}try{const i=await x(Number(l),a.token);m(i),n(null)}catch(i){o.isCancel(i)||(console.error("获取电影详情失败:",i),n("获取电影详情失败，请稍后重试"))}finally{r(!1)}})(),()=>{a.cancel("组件卸载，取消请求")}},[l]),h?s.jsx("div",{className:"movie-detail-loading",children:"加载中..."}):t||!e?s.jsx("div",{className:"movie-detail-error",children:t||"电影详情加载失败"}):s.jsxs("div",{className:"movie-detail-container",children:[s.jsxs("div",{className:"movie-header",children:[s.jsx("div",{className:"movie-poster",children:s.jsx(d,{src:e.photos?.[0],fit:"cover",width:120,height:168})}),s.jsxs("div",{className:"movie-info",children:[s.jsx("h1",{className:"movie-title",children:e.nm}),s.jsxs("div",{className:"movie-meta",children:[s.jsx("span",{className:"meta-item",children:e.cat}),s.jsx("span",{className:"meta-item",children:e.src}),s.jsxs("span",{className:"meta-item",children:[e.dur,"分钟"]})]}),s.jsxs("div",{className:"movie-score",children:[s.jsx("span",{className:"score-value",children:e.sc}),s.jsx("span",{className:"score-label",children:"分"})]}),s.jsxs("div",{className:"movie-pubdate",children:["上映：",e.rt]})]})]}),s.jsxs("div",{className:"movie-section",children:[s.jsx("h2",{className:"section-title",children:"剧情简介"}),s.jsx("p",{className:"section-content",children:e.dra})]}),s.jsxs("div",{className:"movie-section",children:[s.jsx("h2",{className:"section-title",children:"导演"}),s.jsx("div",{className:"section-content",children:e.dir})]}),s.jsxs("div",{className:"movie-section",children:[s.jsx("h2",{className:"section-title",children:"主演"}),s.jsx("div",{className:"actors-list",children:e.actors?.map(a=>s.jsxs("div",{className:"actor-item",children:[s.jsx(d,{src:a.img,fit:"cover",width:60,height:84}),s.jsx("div",{className:"actor-name",children:a.name}),s.jsx("div",{className:"actor-role",children:a.role})]},a.id))})]}),s.jsxs("div",{className:"movie-section",children:[s.jsx("h2",{className:"section-title",children:"影片资料"}),s.jsxs("div",{className:"film-info",children:[s.jsxs("div",{className:"info-row",children:[s.jsx("span",{className:"info-label",children:"出品发行"}),s.jsx("span",{className:"info-value",children:e.src})]}),s.jsxs("div",{className:"info-row",children:[s.jsx("span",{className:"info-label",children:"技术参数"}),s.jsxs("span",{className:"info-value",children:[e.dur,"分钟"]})]})]})]})]})};export{u as default};
